<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!--<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">-->
    <!--<<meta http-equiv="X-UA-Compatible" content="chrome=1">-->
    <title>Map</title>
    <script src="./Cesium/Cesium.js"></script>
    <script src="Scripts/jquery-1.6.4.min.js"></script>
    <script src="Scripts/jquery.signalR-2.2.0.min.js"></script>
    <script src="signalr/hubs"></script>
    <script src="http://localhost:8080/signalr/hubs"></script>
    <style>
        @import url(./Cesium/Widgets/widgets.css);

        html, body, #cesiumContainer {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <!--<p>Content goes here</p>-->
    <div id="cesiumContainer"></div>
    <script type="text/javascript">
        var viewer = new Cesium.Viewer('cesiumContainer');
        //var shadedRelief = new Cesium.WebMapTileServiceImageryProvider({
        //    url: 'http://land3364vpn:8080/geoserver/gwc/service/wmts?',
        //    layer: 'nurc:mosaic',
        //    style: '',
        //    tilingScheme: new Cesium.GeographicTilingScheme(),
        //    format: 'image/jpeg',
        //    tileMatrixSetID: 'EPSG:4326',
        //    minimumLeve: 0,
        //    maximumLevel: 5,
        //    credit: new Cesium.Credit('U. S. Geological Survey'),
        //    tileMatrixLabels: ['EPSG:4326:0', 'EPSG:4326:1', 'EPSG:4326:2', 'EPSG:4326:3', 'EPSG:4326:4']
        //});
        //viewer.scene.imageryLayers.addImageryProvider(shadedRelief);

        //var shadedRelief = new Cesium.WebMapTileServiceImageryProvider({
        //    url: 'http://http://tiles.cloudapp.net/wmts/',
        //    layer: 'test:mosaic',
        //    style: '',
        //    tilingScheme: new Cesium.GeographicTilingScheme(),
        //    format: 'image/jpeg',
        //    tileMatrixSetID: 'EPSG:4326',
        //    minimumLeve: 0,
        //    maximumLevel: 5,
        //    credit: new Cesium.Credit('U. S. Geological Survey'),
        //    tileMatrixLabels: ['EPSG:4326:0', 'EPSG:4326:1', 'EPSG:4326:2', 'EPSG:4326:3', 'EPSG:4326:4']
        //});
        //viewer.scene.imageryLayers.addImageryProvider(shadedRelief);

        

        //var shadedRelief1 = new Cesium.WebMapTileServiceImageryProvider({
        //    url: 'http://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryOnly/MapServer/WMTS/',
        //    layer: 'USGSShadedReliefOnly',
        //    style: 'default',
        //    format: 'image/jpeg',
        //    tileMatrixSetID: 'default028mm',
        //    // tileMatrixLabels : ['default028mm:0', 'default028mm:1', 'default028mm:2' ...],
        //    maximumLevel: 19,
        //    credit: new Cesium.Credit('U. S. Geological Survey')
        //});
        //viewer.imageryLayers.addImageryProvider(shadedRelief1);

        //Set the hubs URL for the connection
        $.connection.hub.url = "http://localhost:8080/signalr";

        var mapHubProxy = $.connection.mapHub;
        mapHubProxy.client.test = function () {
            //alert(message);
            //console.log(message);
            //alert('loading USGSShadedReliefOnly layer');
            var shadedRelief1 = new Cesium.WebMapTileServiceImageryProvider({
                url: 'http://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryOnly/MapServer/WMTS/',
                layer: 'USGSShadedReliefOnly',
                style: 'default',
                format: 'image/jpeg',
                tileMatrixSetID: 'default028mm',
                // tileMatrixLabels : ['default028mm:0', 'default028mm:1', 'default028mm:2' ...],
                maximumLevel: 19,
                credit: new Cesium.Credit('U. S. Geological Survey')
            });
            viewer.imageryLayers.addImageryProvider(shadedRelief1);
        };
        $.connection.hub.start()
            .done(function () {
                //mapHubProxy.server.test('hello from' + $.connection.hub.id);
                //alert('should be done');
                mapHubProxy.server.test();
            })
            .fail(function(){ console.log('Could not Connect!'); });
        //});
        //mapHubProxy.server.test('asdasd');
    </script>
</body>
</html>